# 模式匹配与正则表达式
- 介绍Python如何用正则表达式处理字符串
- 介绍Python如何用正则表达式查找文本模式

## 不用正则表达式来查找文本模式

## 用正则表达式查找文本模式

- 正则表达式 regex 是文本模式的描述方法
- 创建正则表达式对象
  - Python 所有正则表达式函数都在 re 模块内
  - re.compile() 传入一个字符串值表示正则表达式，返回值是一个 Regex 模式对象
- 匹配 Regex 对象
  - object.search()方法查找传入的字符串，寻找该正则表达式的所有匹配，如果字符串没有找到，返回 None，如果找到，返回一个 Match 对象
  - Match 对象 group()方法，返回被查找字符串中实际匹配的文本
- 正则表达式匹配步骤
  - import re
  - re.compile()创建 Regex 对象
  - 向 Regex 对象的 search()方法传入想要查找的字符串，返回一个 Match 对象，包含被查找字符串的第一次匹配的文本
  - 调用 Match 对象的 group()方法，返回实际匹配文本的字符串

## 用正则表达式匹配更多模式

- 在正则表达式中使用()进行分组，在 Match 对象中，使用 group()和 groups()获取分组信息，groups()返回值类型是元组
- 通过管道符｜匹配多个文本
- 用问号? 实现可选匹配
- 用星号\* 匹配零次或多次
- 用加号+ 匹配零次或多次
- 用花括号{} 匹配特定次数

## 贪心和非贪心匹配

- Python 的正则表达式默认贪心匹配，尽可能匹配最长的字符串
- 花括号的非贪心尽可能匹配最短的字符串，格式是在结束的花括号后跟一个问号

## findall()方法

- 返回一组字符串，包含被查找字符串中所有匹配文本
- 如果正则表达式中没有分组，返回字符串列表
- 如果正则表达式中有分组，返回元组的列表

## 字符分类

- [] 包含[]内的所有字符，可以使用-进行缩短
- \d 表示任何数字
- \D 除 0 ～ 9 之外任何字符
- \w 任何字母、数字和下划线
- \W 除字母、数字和下划线之外的任何字符
- \s 空格、制表符或换行
- \S 除空格、制表符或换行之外的任何字符

## 建立自己的字符分类

- 使用[]可以定义自己的字符分类，左方括号后加上一个插入字符^表示非字符类
- 非字符类匹配不在这个字符类中的所有字符

## 插入字符和美元符号

- 插入字符^表示匹配必须发生在被查找文本开始处
- 插入字符$表示匹配必须发生在被查找字符结尾处

## 通配字符

- 句点.称为通配字符，匹配换行符之外所有字符
- 点-星(.\*)表示除换行符之外的任意文本，参数 re.DOTALL 可以让句点字符匹配所有字符

## 正则表达式复习

- ？匹配零次或一次
- \* 匹配零次或多次
- \+ 匹配一次或多次
- {n} 匹配 n 次前面的分组
- {n,}匹配 n 次或更多前面的分组
- {,m}匹配零次到 m 次前面的分组
- {n,m}匹配至少 n 次，至多 m 次前面的分组
- {n,m}?、\*?或+?对前面的分组进行非贪心匹配
- ^spam 意味着字符串必须以 spam 开始
- spam$意味着字符串必须以 spam 结束
- .匹配所有字符，换行符除外
- \d、\w 和\s 分别匹配数字、单词和空格
- \D、\W 和\S 分别匹配数字、单词和空格外的所有字符
- [abc]匹配方括号内的任意字符（如 a、b 或 c）
- [^abc]匹配不在方括号内的任意字符

## 不区分大小写的匹配

- 在 re.compile()传入参数 re.IGNORECASE 或 re.I

## 用 sub()方法替换字符串

- 参数一: 字符串用于替换被发现的匹配
- 参数二: 原始字符串，即正则表达式应用的字符串

## 管理复杂的正则表达式

- 忽略空白符和注释的参数，re.VERBOSE

## 组合使用 re.IGNORECASE、re.DOTALL 和 re.VERBOSE

- 通过管道符｜可以加入多个参数

## 项目: 电话号码和 E-mail 地址提取程序

## 小结

- re 模块编译 Regex 对象
- search()方法查找单词匹配
- findall()方法查找所有匹配实例
- sub()方法对文本进行查找和替换
