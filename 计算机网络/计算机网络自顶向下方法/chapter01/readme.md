# 计算机网络和因特网

## 什么是因特网
- 从两方面描述，一个是具体构成即因特网的基本硬件和软件，一个是作为应用的基础服务设施即服务
- 具体构成描述
    - 所有的终端设备称为主机或端系统
    - 端系统通过通信链路和分组交换机连接
        - 通信链路根据材质不同可以分为同轴电缆、铜线、光纤和无线电频谱
        - 不同材质的通信链路传输速率(bit/s、bps)不同
        - 数据包的大小不一致，所以为了保持一致性，需要将不同大小的数据包分组成为统一大小统一格式，我们把这样的行为称为分组
        - 分组交换机可以分为路由器和链路层交换机
    - 端系统通过因特网服务提供商ISP接入, 低层ISP与高层ISP互联
        - ISP的本质是一个由多台分组交换机和多段通信链路组成的网络
        - 底层ISP包含住宅、公司、大学,WIFI、蜂窝数据
    - 终端设备通过运行协议进行信息的接收和发送
        - TCP(传输控制协议)和IP(网际协议)是其中最重要的两个协议
    - 因特网标准
        - 由因特网工程任务组IETF研发
        - 标准文档称为请求评论RFC
    - 从具体构成而言，因特网是终端、交换机、链路等硬件的集合
- 服务描述
    - 分布式应用程序: 涉及多个相互交换数据的端系统的应用程序
    - 套接字接口: 由端系统提供，规定运行在其上的程序与其他端系统中特定程序交换数据的方式
    - 从服务描述而言，因特网是一个服务提供的平台，规定了数据交换的方式
- 什么是协议
    - 协议定义了在两个或多个通信实体之间交换的报文的格式和顺序，以及报文发送或接收一条报文或其他事件所采取的动作

## 网络边缘
- 端系统包含桌面计算机、服务器和移动计算机
- 接入网
    - 接入网是指将端系统物理连接到边缘路由器的网络
    - 边缘路由器是端系统到其他远程端系统的路径上第一台路由器
    - 家庭接入
        - DSL(数字用户线)
            - 从本地电话公司(ISP)获得接入
            - 通过现有电话线和位于电话公司的本地中心局(CO)中的数字用户线接入复用器交换数据
        - 电缆
            - 通过有限电视基础设施接入
        - FTTH
            - 从本地中心局(CO)直接到家庭提供一条光纤路径, 通常在接近家庭位置，光纤分成每户一根光纤
            - 主动
        - 拨号
        - 卫星
    - 企业接入
        - 以太网
            - 使用双绞铜线与一台以太网交换机相连
        - WiFi
            - 基于802.11技术的无线LAN接入
    - 广域网无线接入
        - 3G
        - LTE
- 物理媒体
    - 导引型媒体:电波沿着固定媒体前行
        - 双绞铜线、同轴电缆、光纤
    - 非导引型媒体:电波在空气或外层空间中传播
        - 陆地无线电信道、卫星无线电信道

## 网络核心
- 分组交换
    - 媒介是报文，单位是比特
    - 分组的目的是将报文划分为一个个数据块，并以等同于当前链路最大传输速率的速度传递
    - 存储转发传输机制
        - 在交换机能够开始向输出链路传输该分组的第一个比特之前，必须接收到整个分组
        - 不考虑传播时延，端到端时延计算，通过由N条速率均为R的链路组成的路径d = NL/R
        - 缺点：存储存储转发时延
    - 输出队列
        - 分组交换机具备的一种输出缓存机制，用于存储路由器准备发往链路的分组，当当前链路正在传输时生效
        - 缺点: 存在输出缓存的排队时延，当缓存充满后，会出现丢包现象
    - 转发表与路由选择协议
        - 每个端系统都具备地址，报文中包含源地址和目的地址，
        - 路由器通过查询临近分组交换机的路由表，选择不同的链路进行传递报文
        - 转发表: 将目的地址映射成为输出链路
        - 路由选择协议可以自动设置转发表
- 电路交换
    - 在端系统通信会话期间，预留了端系统间沿路径通信所需要的而资源
    - 通过频分复用或者时分复用实现
- 网络的网络
    - 网络结构1
        - 用单一的全球传输ISP互联所有接入ISP
    - 网络结构2
        - 用多个全球传输ISP互联所有接入ISP
        - 全球传输ISP之间互联
    - 网路结构3
        - 接入ISP与区域ISP互联
        - 区域ISP和第一层ISP互联
        - 第一层ISP之间互联
    - 网络结构4
        - 增加POP、多宿、对等和因特网交换点
        - POP: 存在点，提供商网络中的一台或多台路由器去群组，客户ISP和提供商ISP互联
        - 多宿: 可以与两个区域ISP多宿
        - 对等: 相同等级结构层次的邻近ISP形成对等关系
        - IXP: 因特网交换点，是一个汇合点，多个ISP在此对等
    - 网络结构5
        - 增加了内容提供商
    - 情况说明
        - 对等ISP之间没有费用结算

## 分组交换网络中的时延、丢包和吞吐量
- 分组交换中的时延概述
    - 节点处理时延
        - 检查分组首部和决定该分组导向何处所需的时间
    - 排队时延
        - 在队列中，分组等待传输的时间，受到流量强度影响
        - 流量强度: 单位时间内到达分组数量与链路传输分组能力的比值
    - 传输时延
        - 数据从发送端设备传输到接收端设备所需的时间
        - 由链路速率R和数据分组长度L决定
        - 路由器推出分组所需的时间，和两台路由距离无关
    - 传播时延
        - 信号在信道中传播一定距离所需的时间
        - 由信号传播的介质(传播速率)和传输距离决定
        - 在两个路由器之间传递所需的时间损耗
- 端到端时延
    - 两个端系统在N-1台路由器之间无拥塞情况的时延公式
    - 端到端延 = N(处理延迟 + 传输延迟 + 传播延迟)
- 计算机网络中的吞吐量
    - 瞬时吞吐量: 瞬间传递速率
    - 平均吞吐量: 文件大小和传递时间的比值
## 协议层次及其服务模型
- 分层的体系结构
    - 每层通过在该层中执行某些动作或使用直接下层的服务来提供服务
    - 协议栈层次: 物理层、链路层、网络层、运输层和应用层
    - 应用层:
        - 协议: http、smtp、ftp、dns
        - 信息格式: 报文
    - 运输层:
        - 协议: tcp、udp
        - 信息格式: 段
    - 网络层:
        - 协议: ip 
        - 信息格式: 包
    - 链路层:
        - 协议: ppp 
        - 信息格式: 帧
    - 物理层:
        - 信息格式: 比特
    - OSI七层
        - 应用层、表示层、会话层、运输层、网络层、数据链路层和物理层
        - 表示层: 使通信的应用程序能够解释交换数据的含义、数据压缩、数据加密、数据描述
        - 会话层：提供数据交换的定界和同步功能
- 封装
    - 报文在向下传递的过程中每层都会附加上该层的信息，这样的行为就是封装

## 面对攻击的网络
- 攻击类型
    - 将有害程序放入计算机
        - 恶意软件: 病毒、蠕虫
    - 攻击服务器和网络基础设施
        - 拒绝服务攻击
            - 弱点攻击
            - 带宽洪泛
            - 连接洪泛
    - 嗅探分组
    - 伪装
        - IP哄骗 
## 计算机网络和因特网的历史
- 在计算机出现之前
    - 电话网络占据通信网络主导地位
- 分组交换的发展: 1961~1972
    - ARPAnet、NCP
- 专用网络和网络互联: 1972~1980
    - ALOHAnet、DARPA
    - TCP、UDP、IP概念形成
- 网络的激增: 1980~1990
    - TCP/IP 正式部署
- 因特网爆炸: 20世纪90年代
    - 万维网
- 最新发展
## 小结