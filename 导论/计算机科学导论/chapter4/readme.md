# 数据运算

## 逻辑运算

- 逻辑运算是位层次和模式层次上的二进制位的运算
- 位层次
  - 非 NOT
    - 只有一个输入，输出位与输入位相反
  - 与 AND
    - 有两个输入，如果输入都是 1，输出是 1
    - 特性
      - 如果有一个输入是 0，则不需要检查其他输入，便可以迅速得到结果为 0
  - 或 OR
    - 有两个输入，如果输入都是 0，输出是 0
    - 特性
      - 如果有一个输入是 1，则不需要检查其他输入，便可以得到结果为 1
  - 异或 XOR
    - 如果输入相同，输出为 0，输入不同，输出为 1
    - 特性:
      - 如果输入中的一位是 1，结果与其他输入
- 模式层次

  - 相同的四个运算符应用到 n 位模式

- 应用
  - 使用 NOT 求反
  - 使用 AND 运算使指定的位复位(置 0)
    - 第二个输入称为掩码，0 位表示对第一个输入进行复位，1 位表示保持第一个输入不变
  - 使用 OR 运算使对指定的位置位(置 1)
    - 使用掩码，0 位表示保持第一个输入不变，1 表示将输出变为 1
  - 使用 XOR 使指定位反转
    - 使用掩码，1 位表示反转相应输入，0 位表示输入保持不变

## 移位运算

- 移位运算是移动模式中的位，改变位的位置，可以分为逻辑移位运算和算术移位运算
- 逻辑移位运算
  - 应用不带不符号位的数，符号由最左位决定
  - 逻辑右移，最右位丢失，最左位补 0
  - 逻辑左移，最左位丢失，最右位补 0
  - 循环移位运算
    - 不增加或丢弃位数，而是进行回环
- 算术移位运算
  - 使用二进制补码表示带符号的整数，不改变符号位
  - 算术右移表示对整数除以 2，保留符号位
  - 算术左移表示对整数乘以 2，接受最左边的位作为符号位，如果符号位新旧不同，发生溢出

## 算术运算

- 算术运算包含加减乘除，适用于整数和浮点数
- 二进制补码加减法
  - 二进制补码的优点在于对于加减法没有区别，所以直接进行简单的加法运算即可
  - 需要注意的是，遇到减法时，计算机会将第二个数求二进制的补码
  - 加法: A + B
  - 减法: A + B 补
- 符号加绝对值整数的加减法(TODO)
  - 先检查运算是加法还是减法，如果是减法，修改第二个整数的符号，为的是将减法转换为加法
  - 对两个符号位进行 XOR 运算，如果结果为 0 表示符号相同，否则符号不同
  - 符号相同，直接进行绝对值的加法运算，最后加上符号位，并且要检查溢出可能性
  - 符号不同，需要对绝对值 A 和绝对值 B 做大小比较，确定符号，并取结果的补码
- 实数的算术运算(加减法)
  - 如果运算结果是减法，改变第二个数的符号
  - 两个数去规范化，将尾数看作一个整体
  - 统一指数，移位相应尾数
  - 将两个数做符号加绝对值格式的整数加法
  - 规范化结果

## 总结

- 列出在数据上进行的三类运算
  - 逻辑运算、移位运算、算术运算
- 在位模式上进行一元和二元逻辑运算
  - 无论一元还是二元，都是四种运算，AND，OR，XOR 和 NOT
  - AND 计算规则: 输入两个 1，输出为 1，否则为 0
  - OR 计算规则: 输入两个 0，输出为 0，否则为 1
  - NOT 计算规则: 输入 1，输出 0；输入 0，输出 1
  - XOR 计算规则: 相同输入，不同输出；不同输入，输出 0
- 区分逻辑移位运算和算术移位运算
  - 逻辑移位适用无符号，通过补 0 进行
  - 算术移位适用有符号，本质是对数据进行 2 的乘除法
- 在位模式上进行逻辑移位运算
- 在以二进制补码形式存储的整数上进行算术移位运算
- 在以二进制补码形式存储的整数上进行加法和减法运算
- 在以符号加绝对值形式存储的整数上进行加法和减法运算
- 在以浮点格式存储的实数上进行加法和减法运算
- 理解逻辑和移位运算的一些应用、如置位、复位和指定位的反转等
