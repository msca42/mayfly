# bit、数据类型及其运算

## bit 和数据类型

- 在计算机内部，数百万的器件控制电子运动，这些器件监测电路中各处电压的变化，通常检测电路中两点间是否有电压，电路的复杂性会大大降低
- 在符号层面，采用 1 表示两点之间存在电压，采用 0 表示两点之间不存在电压，我们称这样的一个符号单位是一个 bit
- 实际上，有电平 1 和无电平 0 并不是严格的电压定义，只表示相对的，0 不代表电路中绝对不存在电压，只是相对于 1 更接近于 0 电压

- 数值的表达方式多种多样，计算机通常使用二进制表示法
- 计算机操纵数值的能力，也就是操作方法，称为该数值的数据类型
- 每个 ISA 都定义了一组数据类型及其相关的操作指令
- 在算术运算中，使用二进制补码表示正负整数

## 整数数据类型

- 无符号整数
  - 使用位值法，位置决定数值
  - k 个 bit 可以表示 2^k 个无符号整数
- 有符号整数
  - 正整数采用位值法，k 个 bit 的整数可以表示 2^(k-1) - 1 个正整数
  - 负整数可以采用反码或补码，k 个 bit 的整数可以表示 2^(k-1) 个负整数
    - 反码就是将一个正整数所有 bi 全部取反，即可得到反码，但是由于这样的编码导致加法器的逻辑复杂，所以计算机通常采用补码进行编码

## 补码

- 符号表示法和反码的缺点都是存在正 0 和负 0
- 符号表示法将首位不表示数字单纯表示符号，1 表示负，0 表示正，然后采用位值法
- 反码是将正整数的二进制位全部取反，正数和负数相加的结果是全 1 的二进制编码
- 所以计算机采用补码作为运算时的编码，补码的表示是在反码的基础上末尾加 1，这样正数和负数相加的结果是全 0 舍 1 的二进制编码
- 如果采用位值法表示补码，第一位不仅表示符号位，也参与运算表示数字

## 二进制与十进制之间的转换

- 二进制转换十进制
  - 方式一
    - 符号位检查，0 表示正数，1 表示负数
    - 正数继续、负数需要将该只转化为绝对值相同的正数的补码(末尾-1，所有比特位取反)
    - 计算绝对值多项式之和
    - 负数前缀负号
  - 方式二
    - 带符号位多项式之和
- 十进制转二进制
  - 采用位值法，分解为多项式，取系数 0 或 1

## bit 运算之一: 算术运算

- 加法和减法
  - 加法运算仍然是对齐运算，从右向左依次进行，满二进一
  - 减法等同于加法
- 符号扩展
  - 为了减少占用空间，较小的数值通常采用较少的 bit 来表示
  - 在运算时，如果缺位，二进制正数前面可以补充 0，负数可以补充 1
- 溢出
  - 在有限个位的表示中，无符号最高位进位时溢出，有符号运算结果超过最大值或最高位进位时溢出

## bit 运算之二: 逻辑运算

- 逻辑运算的操作数时逻辑变量，逻辑变量只有两个值，0 表示 false 和 1 表示 true
- 与运算(AND)
  - 如果两个操作数都是 1，结果就是 1，否则，结果是 0
- 或运算(OR)
  - 如果两个操作数都是 0，结果就是 0，否则，结果是 1
- 非运算(NOT)
  - 如果操作数是 1，结果是 0，如果操作数是 0，结果是 1
- 异或运算(XOR)
  - 如果两个操作数相同，结果是 0，否则，结果是 1

## 其他类型

- 位矢量
  - 在很多复杂系统中，包含许多独立单元，使用 n-bit 个二进制数代表 n 个单元，当单元空闲时置 0，当单元忙碌时置 1，我们称这个二进制数为"位矢量"
- 浮点数
  - 根据 IEEE754 的规范，float 类型的 32 位组成可以分为 1bit 的符号位，8bit 的数值范围表示指数，23bit 的数值精度表示尾数
  - 由于规范化的存在，尾数实际上隐藏了小数点和小数点左边的正整数 1
  - 关于指数，二进制的 8-bit 可以表示 256 个不同的指数值，指数的范围是 1 ～ 254 以及 00000000 和 11111111
  - 对于 254 个数字，计算机采用余码表示无符号整数，float 余 127，实际的指数是该无符号整数减 127 之后的结果
- ASCII
  - ASCII 码是计算机处理单元和输入输出设备之间传递字符的编码标准
- 十六进制 HEX
  - 数码为 0 ～ 9，A ～ F 的进制表示
