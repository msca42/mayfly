# 函数
- 函数是C程序的构建块，本质是一个自带声明和语句的小程序

## 函数的定义和调用

- 定义格式: 返回值类型 函数名(数据类型 形式参数名){ 函数体 }
- 调用格式: 函数名(实际参数列表)
- 关于返回值类型的注意事项
  - 函数不能返回数组，但关于返回类型没有其他限制
  - 指定返回类型是void类型，说明函数没有返回值
  - 如果省略返回类型，C89会假定函数返回类型是int类型  
  - 可以将返回值类型单独列一行，放在函数名之前
- 关于参数列表的注意事项
  - 没有形式参数时，需要使用void代替

## 函数声明

- 格式: 返回类型 函数名(数据类型 形式参数名);
- 函数声明不同于完整的函数定义，而是对函数进行概述，为了防止函数定义在调用之后产生的错误，此类函数声明成为函数原型
- 不需要说明函数形式参数的名字，只需要显示类型即可，但是通常情况不省略
- 一个C99的规则: 在调用函数之前，必须先对其进行声明或定义。调用函数时，如果此前编译器未见到该函数的声明或定义，会导致出错

## 实际参数

- 实际参数是值传递: 调用函数时，计算出每个实际参数的值并且把它赋给相应的形式参数
- 形式参数的值的改变不会影响实际参数的值
- C 语言允许实际参数的类型和形式参数的类型不一致的情况下的函数调用
  - 具体规则根据调用函数与函数原型的位置有关
  - 函数原型在前，实际参数隐式转换为相应形式的类型
  - 调用函数在前，默认实际参数提升，float 转 double,char,short 转 int
- 数组作为实际参数
  - 形式参数是一维数组可以不说明数组长度
  - 形式参数是多维数组只能省略第一维的长度
  - 传递任意列数的多维数组可以通过指针数组或变长数组形式参数解决
  - 函数无法确定数组的长度，需要参数告知
  - 函数可以改变数组中元素的内容
- 变长数组形式参数
  - 格式: 返回值类型 函数名(类型 数组长度,类型 数组名[数组长度｜*|空])
    - \*可以取代数组长度表示数组长度与形式参数列表中前面的参数有关
    - 方括号为空也是合法的，但是不建议，因为没有说明数组长度和数组的关系
  - 优点
    - 通过指定数组参数的长度使得函数的声明和定义更具描述性
    - 可以指定任意列数而非固定列数的数组

- 在数数组参数声明中使用 static

  - 格式: 数组名[static number] 表示数组长度至少是 number 长度

- 复合字面量
  - 通过指定其包含的元素而创建的没有名字的数组,本质就是匿名数组
  - 格式: (类型名) 初始化器
  - 可以作为参数取代命名数组

## return 语句

- 格式: return 表达式;
- 如果 return 语句的表达式与函数的返回类型不匹配，系统会把表达式的类型隐式地转换成返回类型

## 程序终止

- 省略函数的返回值在 C99 中不合法，省略 main 函数参数列表中的 void 在 C99 中合法，但不建议
- main函数默认返回值类型是int,通用参数名是argc和argv
- 程序终止的方式一: return 表达式;
  - main 函数的返回值是状态码，正常终止返回 0，异常终止返回非 0 值
  - 仅当main函数调用表示终止
- 程序终止的方式二: exit 函数
  - 属于 stdlib.h 头，传递给 exit 函数的参数和 main 函数返回值具有相同的额含义
  - 0 表示正常返回，非 0 表示非正常返回
  - 宏 EXIT_SUCCESS 和 EXIT_FAILURE 也可以表示

## 递归

- 递归: 函数调用自身
- 注意事项: 使用递归，唯一注意的就是函数的终止条件

- 递归从属于分治法，另一个经典的分治算法就是快速排序

- 快速排序算法
  - 选择数组元素 e 作为分割元素，从元素 1 到 i 都比 e 小或相等，从 i+1 到 n 都比 e 大或相等
  - 通过递归快速排序对 1 ～ i 排序
  - 通过递归快速排序对 i+1 ～ n 排序

## 泛型选择

- 能够使用名字相同，参数和返回类型不同的多个函数的特性，在高级语言中通过函数重载实现，在 C 语言中不支持
- 为了解决，C99 在 C 标准库提供了泛型宏，C11 中引入泛型选择
- 泛型选择格式: \_Generic(控制表达式，泛型关联列表)
- 泛型关联格式: 类型名: 表达式 default: 表达式
- 控制表达式用于匹配泛型关联列表，有且仅能匹配一个泛型关联列表，如果都不匹配，匹配default