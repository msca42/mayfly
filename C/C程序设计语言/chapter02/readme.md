# 类型、运算符与表达式

- 变量和常量是程序处理的两个基本数据对象
- 声明语句说明变量的名字和类型,也可以初始化指定变量的初值
- 运算符指定将要进行的操作
- 表达式将变量和常量组合起来生成新的值
- 对象的类型决定对象可取值的集合以及可以对该对象执行的操作
- ANSI C 的修改和增补
  - 所有整型可以分为 signed 和 unsigned
  - 浮点运算可以是单精度 float 以及更高精度 long double
  - 支持枚举运算
  - 对象可以声明为 const，表示其值不能修改
  - 自动强制转换规则的修改

## 变量名

- 变量和符号常量命名规则
  - 字母和数字组成的序列
  - 第一个字符必须是字母
  - 下划线\_可以看作字母，由于库例程的名字通常以下划线为主，所以变量名尽量不要以下划线开头
  - 大写字母和小写字母有区别
  - 变量名使用小写字母，符号常量使用大写字母
  - 关键字不能作为变量名
- 内部名和外部名的规则
  - 内部名
    - 程序在局部范围内使用的标识符
    - 至少前 31 个字符是有效的
  - 外部名
    - 在整个程序范围内是使用的标识符
    - 至少前 6 个字符是唯一的

## 数据类型及长度

- C 语言只提供的以下几种数据类型
  - char 字符型，占用一个字节，可以存放本地字符集的一个字符
  - int 整型，通常反映所用机器中整数的最自然长度，通常为 16 位或 32 位
    - short int 通常为 16 位
    - long int 通常为 32 位
    - 最低限制
      - short、int 至少 16 位
      - long 至少 32 位
      - short 不得长于 int
      - int 不得长于 long
  - float 单精度浮点数
  - double 双精度浮点数
  - 类型限定符 signed 和 unsigned
    - 用于修饰限定 char 类型或任何整型
    - unsigned 类型总是正值或 0，并遵守算术模 2^n 定律，其中 n 表示占用的位数
    - 以 char 为例，unsigned 修饰占用范围 0 ～ 255，signed 修饰占用范围-128 ～ 127
  - 数据类型长度定义的符号常量记忆其它与机器有关的属性可以在标准头文件<limits.h>和<float.h>中查找

## 常量

- int 类型常量: 1,2,3,4
- long 类型常量: 以字母 l 或 L 结尾
- 无符号常量: 以 u 或 U 结尾
- 浮点事常量形式: 包含一个小数点或一个指数
  - float: 以 f 或 F 结尾
  - double:没有后缀结尾
- 整型的进制表示
  - 十进制
  - 八进制:以 0 开头
  - 十六进制: 以 0x 或 0X 开头
- 字符常量

  - 使用单引号包裹一个一个字符‘x’
  - 在机器字符集中的数值就是字符常量的值,48
  - 通过具体数值可和其他字符进行比较和参与运算
  - 转义字符也是一种字符常量\n
  - 可以用\ooo 或\xhh 表示任意的字节大小的位模式,ooo 代表 1 ～ 3 个八进制,hh 代表一个或多个十六进制
  - 常见转义字符
    - \a: 响铃符、\b: 回退符、\f:换页符、\n: 换行符、\r: 回车符、\t:横向制表符、\v: 纵向制表符
    - \\\\: 反斜杠、\?: 问号、\': 单引号、\": 双引号、\ooo: 八进制、\xhh: 十六进制
  - 空字符:'\0'

- 常量表达式
  - 仅仅包含常量的表达式
  - 在编译时求值
- 字符串常量
  - 字符串字面量，使用双引号包裹起来的 0 个或多个字符组成的字符序列
  - 字符串常量就是字符数组，使用空字符'\0'结尾，标准库函数 strlen(s)可以返回字符串参数 s 的长度，不包含末尾的'\0'
    - 标准头文件<string.h>
- 字符常量和和仅包含一个字符的字符串的区别
  - 前者是一个整数，其值是字母在机器字符集中对应的数值
  - 后者是一个包含一个字符以及一个结束符‘\0’的字符数组
- 枚举常量
  - 一个常量整型值的列表
  - 在没有显式说明的情况下，第一个枚举值为 0，第二个为 1
  - 优点: 在常量值和名字之间的关联提供一种方式，相对于 define 来说，常量值可以自动生成

## 声明

- 所有变量都必须先声明后使用，一个声明指定一种变量类型
- 声明的同时可以进行初始化，非自动变量只能初始化一次，自动变量在每次使用函数或程序块时初始化
- 默认情况，外部变量与静态变量都被初始化为 0，未经显式初始化的自动变量为未定义值
- 任何变量的声明都是使用 const 限定符修饰，表示变量的值不可改变

## 算术运算符

- 二元运算符包括: +、-、\*、/、%
- 整数的除法会截断结果的小数部分

## 关系运算符与逻辑运算符

- 关系运算符包括: >、>=、<、<=、==、!=
- 逻辑运算符包括: &&、||、!
- &&和||在知道第一个逻辑表达式的结果后，如果单结果可以直接确定最终结果，那么第二个逻辑表达式就不会进行运算
- 在关系运算符和逻辑运算符中，如果关系为真，表达式结果为数值 1，否则为数值 0
- !的作用是将 0 和 1 进行转换

## 类型转换

- 自动转换: 把比较窄的操作数转换为比较宽的操作数，并且不会出现信息丢失
- 针对可能会出现信息丢失的表达式，编译器会给出警告
- 在大多数情况下，会进行隐式的算术类型转换

  - 如果一个操作数的类型是 long double、double、float、long，另一个操作数将被转换为对应类型，然后进行运算
  - 将 char 和 short 类型的操作数转换为 int

- 任何表达式都可以通过强制类型转换符进行显式类型转换
  - 格式: (类型名) 表达式
- 通常情况下，参数是通过函数原型进行声明的，当函数被调用时，声明将对参数进行自动强制类型转换

## 自增运算符和自减运算符

- C 语言提供了两个用于变量递增和递减的运算符: 自增运算符++和自减运算符--
- 作用: 可以作为前缀，也可以作为后缀
  - 前缀: 先将变量的值加 1，然后再使用变量的值进行运算
  - 后缀: 先使用变量的值进行运算，然后将变量的值加 1

## 位运算符

- 位运算符只能作用于整型操作数，即带符号或无符号的 char、short、int 与 long 类型
- 位运算符包含:
  - & 按位与 AND
    - 屏蔽二进制位
  - ｜ 按位或 OR
    - 将二进制位置 1
  - ^ 按位异或 XOR
    - 操作数不同为 1，相同为 0
  - << 左移
    - 右边空出的用 0 填充，等价于乘以基数的移位数幂
  - \>> 右移
    - 对于无符号数，左边使用 0 填充
    - 对于有符号数，左边使用符号位填充(算术移位)，左边使用 0 填充(逻辑移位)
  - ~ 按位取反
    - 求整数二进制的反码

## 赋值运算符与表达式

- 赋值运算符格式: op=
- 其中 op 表示以下运算符: +、-、\*、/、%、<<、>>、&、^、|

## 条件表达式

- 格式: expr1 ? expr2 : expr3
- 原理: 如果 expr1 为真，计算 expr2，否则计算 expr3

## 运算符优先级与求值次序
