# C 语言基本概念

## 编写一个简单的 C 程序

- 编写源代码
  - 扩展名为 c
- 编译和链接
  - 本质是将源代码转换为机器可以执行的形式(机器语言)
  - 转化步骤
    - 预处理，执行#开头的命令(指令)给程序添加内容
    - 编译，通过编译器将程序翻译成机器指令(目标代码)
    - 链接，通过链接器将机器指令与附加代码整合成可执行程序
      - 附加代码包括程序中用到的库函数
  - 通常上述过程自动实现，C 编译器名为 cc,默认生成 a.out 的可执行程序
    - 通过-o 参数可以修改可执行程序的名称
    - 通过-c 参数可以实现只编译不链接
    - 将目标文件传递给 cc，可以实现链接操作
- 集成开发环境
  - 本书不做讨论

## 简单程序的一般形式

- 一个 C 程序具备以下形式
  - 指令: 在编译前修改程序的编辑命令
  - 函数: 被命名的可执行代码块
  - 语句: 程序运行时执行的命令
- 指令
  - 预处理执行的命令
  - 作用: 将特殊文件加载到程序中
  - C 语言不同于其他程序，没有内置的读写命令，此类功能需要通过标准库的函数实现
  - 所有指令以#开头，通过#可以区分指令和语句
  - 指令默认只占一行，结尾没有分号或其他标记
- 函数
  - 一系列组合在一起并赋予了名字的语句
  - 作用: 构建程序的构建块
  - C 语言本质是函数的集合，函数可以分为库函数和自定义函数
  - main 函数
    - 执行程序时自动调用，终止时返回一个状态码
    - 函数通过关键字 return 可以返回数据
      - 返回值类型由函数名前的数据类型决定
      - main 函数默认返回值 0
      - return 关键字的另一个作用是结束函数
    - 函数存在参数，当参数为 void 时，表示该函数没有参数
- 语句
  - 语句: 程序执行时的命令
  - 常用语句: 函数调用语句、返回语句、表达式语句、复合语句、空语句
  - 每条语句都要以分号结尾，复合语句除外
    - 分号的意义在于确定语句的结束位置
- 显示字符串
  - 使用 printf 函数输出字符串
  - 字面串: 用一对双引号包围的一系列字符
  - printf 函数默认单行输出，如果要换行传输，需要使用转义字符\n

## 注释

- 用来解释代码，通常表现为文档说明的形式
- 文档说明主要包含以下内容: 程序名、编写日期、作者、程序的用途以及其他相关信息
- C 语言注释可以分为两类: 翼型注释和单行注释
  - 翼型注释 /\*\*/
  - 单行注释 //

## 变量和赋值

- 变量
  - 内存中的存储单元
  - 作用:临时存储程序执行过程中可能发生改变的数据
- 类型
  - 作用:
    - 说明变量存储数据的种类
    - 确定变量的存储方式以及允许对变量进行的操作
  - 这里限定两种类型
    - 整型 int
    - 浮点型 float:
      - 进行算术运算时比 int 慢
      - 存储的是近似值
- 声明
  - 使用变量之前必须进行的操作
  - 通常位于语句之前，C99 之后可忽略
  - 格式为 类型 变量名 分号
  - 可以一次性声明一个或多个相同类型的变量
  - 程序通用模板
    - 指令、函数、声明、语句
- 赋值
  - 将表达式赋值给变量，表达式通常由常量、变量和运算符组成
  - 格式为 变量名 = 表达式 分号
  - 对于部分类型赋值的时候，为了区分，必须使用后缀
    - float 类型赋值时，表达式后缀 f
  - 混合赋值可以，但不安全
- 显示变量的值
  - printf 函数为格式化输出函数
  - 参数格式: 显示字符串，变量 1，变量 2
  - 显示字符串包含占位符，用来对应后续变量显示位置
  - 占位符规则
    - %d 表示整数
    - %f 表示浮点数，默认显示小数点后 6 位，通过设置 p 改变,.p 放置在%和 f 之间
- 初始化
  - 对变量进行赋值的操作
  - 未初始化: 没有默认值并且尚未在程序中被赋值
  - 初始化器: 用于初始化的常量
  - 两种初始化方式
    - 在声明时直接使用初始化器
    - 声明之后通过赋值的方式
- 显示表达式的值
  - printf 函数可以用来显示任意数值的表达式，格式化标准输出函数
  - 在任何需要数值的地方，都可以使用具有相同类型的表达式

## 读入输入

- 通过格式化输入获取数据，格式化输入函数 scanf
- 参数格式: 格式串、数据 1、数据 2
- 格式串是用来制定输入数据或输出数据的格式

## 定义常量的名字

- 常量: 程序运行中不会改变的临时存储单元
  - 为了明确程序中常量的意义，在 C 语言中，使用**宏定义**特性给常量表达式命名
  - 宏定义是预处理指令，结尾没有分号
  - **当常量表达式包含运算符，建议用括号把表达式括起来**
- 格式 #define 宏 (常量表达式)

## 标识符

- 定义: 变量、函数、宏和其他实体命名的自定义名称
- 规则:
  - 由字母、数字和下划线组成
  - 数字不能开头
  - 区分大小写
  - 可以使用通用字符名
- 两种风格
  - 传统 C：只使用小写，可以在中间下划线
  - Java：除第一个单词外每个单词用大写字母开头
- 关键字
  - 对 C 编译器来说具有特殊意义的单词
  - 不能作为标识符使用

## C 程序的书写规范

- 可以将程序看作一连串的记号，所谓记号就是不改变意思的情况下无法再分割的字符组
- 记号之间没有严格的空格要求，除非两个记号可以直接合并为一个记号
- 记号之间添加间隔(空格、制表、换行)是为了阅读和理解
- 记号之间添加空格的规则
  - 语句可以分开放在任意多行
  - 记号间的空格更容易区分记号
  - 缩进有助于识别程序嵌套
  - 空行可以把程序划分成逻辑单元
