# 程序结构
- 主要讨论一个程序包含多个函数时所产生的几个问题
- 主要内容
    - 局部变量
    - 外部变量
    - 程序块
    - 作用域
    - 构建C程序

## 局部变量
- 局部变量: 在函数体内声明的变量
    - 性质1: 自动存储期
        - 变量的存储期: 在程序执行过程中，能够确保变量的存储空间必定存在的那一部分时间
        - 自动存储期: 局部变量的存储空间是随着函数调用自动分配，随着函数返回收回分配
    - 性质2: 块作用域
        - 变量的作用域: 可以引用该变量的那一部分程序文本
        - 块作用域: 从变量声明开始到函数体末尾
- 静态局部变量
    - 在局部变量声明中放置static
    - 使得变量具有静态存储期，所谓静态存储期是指变量在程序执行期间都具有永久的存储单元
- 形式参数
    - 等同于局部变量，唯一的区别在于，形式参数在函数调用时自动初始化

## 外部变量
- 外部变量是声明在任何函数体之外的变量
    - 性质1: 静态存储期： 存储在外部变量中的值会被永久保存下来
    - 性质2: 文件作用域:  从变量声明开始到文件结尾
- 示例: 用外部变量实现栈
    - 把元素存储在数组中，用一个名为top的变量标记栈顶的位置
- 外部变量的利与弊
    - 修改外部变量，需要检查对其他函数的影响
    - 依赖外部变量的函数高耦合

## 程序块
- 特点
    - 声明在程序块中的变量的存储期是自动的：进入自动分配，退出自动回收
    - 变量具有作用域，不能再程序块外引用

## 作用域
- 规则： 当程序块内的声明命名一个标识符时，如果此标识符时可见的，新的声明临时隐藏了旧的声明，标识符获得了新的含义，在程序块的末尾，标识符重新获得旧的含义

## 构建C程序
- 只考虑单个文件的程序
- 组成
    - 预处理指令
    - 类型定义typedef
    - 外部变量声明
    - 函数原型
    - 函数定义
- 编排顺序
    - #include指令
    - #define指令
    - 类型定义
    - 外部变量的声明
    - 除main函数之外的函数的原型
    - main函数的定义
    - 其他函数的定义
- 建议
    - 在每个函数的定义前，放盒型注释，描述函数名，函数目的，每个形式参数的含义，返回值，并罗列所有副作用