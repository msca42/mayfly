# 计算机组成

## 目标

- 列出计算机的三个子系统
- 描述计算机中央处理单元 CPU 的作用
- 描述典型计算机中之林周期的取指令-译码-执行阶段
- 描述主存储器和它的地址空间
- 区分主存储器和缓存
- 定义输入/输出子系统
- 理解子系统间的互相连接，列出不同总线系统
- 描述输入/输出编址的不同方法
- 区分设计计算机体系结构的两种主要趋势
- 理解计算机是如何使用管道改善吞吐量的
- 理解并行处理是如何改善计算机的吞吐量的

## 引言

- 计算机的组成部件可以分为中央处理器、主存储器和输入/输出子系统

## 中央处理单元

- 组成部件: 算术逻辑单元、控制单元、寄存器组
- 算术逻辑单元
  - 对数据进行逻辑、移位和算术运算
- 寄存器
  - 存放临时数据的存储单元
  - 分类
    - 数据寄存器
    - 指令寄存器
    - 程序计数器
- 控制单元
  - 控制各个子系统的操作

## 主存储器

- 存储单元的集合，每个存储单元都有一个唯一标识(地址)
- 数据以字为单位，字的长度是 8 的倍数
- 地址空间
  - 存储器中标识的独立的地址单元的总称
  - 地址空间的大小和内存空间的大小呈 log 关系
- 存储器的类型
  - 分为 RAM 和 ROM
  - RAM 随机存取存储器
    - 特点:
      - 随机存储
      - 易失性
    - 可以分为 SRAM 和 DRAM
      - SRAM 使用触发器门电路，DRAM 使用电容器
  - ROM 只读存储器
    - 内容由制造商写入
    - 特点
      - 非易失性
- 存储器的层次结构
  - 寄存器
  - 高速缓冲存储器
  - 主存

## 输入/输出子系统

- 可以分为非存储设备和存储设备
- 非存储设备
  - 键盘、监视器
  - 打印机
- 存储设备
  - 磁介质存储设备
  - 光存储设备

## 子系统的互连

- CPU 和存储器的连接
  - 通过三组总线连接
  - 数据总线
    - 用于传递数据
    - 多根线组成，每根线传递 1 位数据
    - 线的数量取决于字的大小
  - 地址总线
    - 线数取决于存储空间的大小
    - 如果存储容量为 2^n，那么地址总线需要传送 n 位的地址数据，n 根线
  - 控制总线
    - 在中央处理器和内存之间传递信息
    - m 根线对应 2^m 个控制命令
- I/O 设备的连接
  - 每个输入/输出设备都有一个特定控制器
  - 控制器可以分为串行或并行设备
  - 串行只有一根数据线，并行有树根数据线
  - 常见控制器: SCSI、火线、USB 和 HDMI
- 输入/输出设备的寻址
  - I/O 独立寻址
  - I/O 存储器映射寻址
  - TODO

## 程序执行

- 机器周期
  - 取指令
    - 控制单元将下一条要执行的指令复制到 CPU 的指令寄存器 IR
    - 被复制的指令地址保存在程序计数器 PC
    - 程序计数器自动加 1 指向内存中的下一条指令
  - 译码
    - 控制单元将指令寄存器中的指令译码，生成可执行的二进制代码
  - 执行
    - 控制单元发送命令到 CPU 部件，让它从内存中读取数据，运算之后保存到输出寄存器
- 输入/输出操作
  - CPU 和输入/输出设备同步方式
    - 程序控制输入/输出
      - CPU 不断查询 I/O 状态知道可以执行
    - 中断控制输入/输出
      - I/O 设备准备好之后，通知 CPU(中断)
    - 直接存储器存取 DMA
      - 通过 DMA 控制器临时存储数据块作为临时中介

## 不同的体系结构

- CISC
  - 复杂指令集计算机
  - CPU 不直接执行机器语言指令，CPU 只执行被称为微操作的简单操作
  - 复杂指令被转换为一系列的微操作
  - 通过微内存保存，使用微操作的程序设计被称为微程序设计
- RISC
  - 精简指令集计算机
  - 使用少量的指令完成最少的简单操作
- 流水线
  - 不同指令的取指令、译码和执行同时进行，而非等待上一条指令执行完成之后进行
- 并行处理
  - 通过多个控制单元、算术逻辑单元和内存单元实现
  - 组织结构
    - SISD
    - SIMD
    - MISD
    - MIMD

## 不同的体系结构

## 简单计算机

- 控制单元具有两个专用寄存器,程序计数器和指令寄存器
- 计算机指令由操作码和操作数两部分组成
