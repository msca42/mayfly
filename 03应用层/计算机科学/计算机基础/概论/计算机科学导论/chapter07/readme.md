# 操作系统

## 目标
- 理解操作系统在计算机中的作用
- 给出操作系统的定义
- 理解把操作系统调入内存的自举过程
- 列出操作系统的组成部分
- 讨论操作系统中内存管理器的作用
- 讨论操作系统中内存管理器的作用
- 讨论操作系统中进程管理器的作用
- 讨论操作系统中设备管理器的作用
- 讨论操作系统中文件管理器的作用
- 理解三种常见操作系统UNIX、Linux和Windows的主要特点

## 引言
- 计算机分为硬件和软件，软件分为操作系统和应用软件，操作系统提供对底层硬件的访问

- 操作系统
    - 是计算机硬件和用户之间的接口，它使得其他程序更加方便有效地运行，并能方便的对计算机硬件和软件资源进行访问

- 自举
    - 前提1: 程序需要载入内存中运行
    - 前提2: 操作系统是程序
    - 前提3: 操作系统可以将其他程序装入内存运行
    - 问题1: 操作系统如何装入内存
    - 过去解决方案:
        - 通过ROM技术，把操作系统存储在内存中，直接从ROM中读指令
    - 现在的解决方案:
        - 阶段1: ROM将小部分内存存入自举程序
        - 阶段2: 加电后，CPU的计数器设置自举程序的第一条指令，并执行程序中的指令。
        - 阶段3: 该自举程序会将操作系统装入RAM内存，CPU的计数器设置为RAM中操作系统的第一条指令

## 演化
- 操作系统的演变历史
- 批处理系统
    - 每个运行的程序称为作业
    - 程序员通过穿孔卡片将程序和数据输入计算机，并向控制器发出作业请求
- 分时系统
    - 引入多道程序概念
    - 将多个作业同时装入内存，并且仅当该资源可用时分配给需要它的作业
- 个人系统
    - 单用户操作系统，DOS
- 并行系统
    - 在同一计算机中安装多个CPU，每个CPU可以处理一个程序或程序的一部分
- 分布式系统
    - 一个作业分布在多台计算机共同完成
- 实时系统
    - 在特定时间限制内完成任务

## 组成部分
- 可以分为1 + 4，1表示用户界面，4表示四种功能: 内存管理，进程管理，设备管理，文件管理
- 用户界面
    - 用来接收用户的输入并向操作系统解释请求的程序
    - 通常有两种形式，一种是shell，一种是gui窗口
- 内存管理器
    - 可以分为两类: 单道程序和多道程序
    - 单道程序
        - 内存装载单一的程序和操作系统
        - 内存容量比程序小，无法运行
        - 一个程序运行时，其他程序不能运行，CPU只服务于此程序，利用率低
    - 多道程序
        - 同一时刻可以装入多个程序并且能够同时被执行，CPU轮流为其服务
        - 技术分类: 非交换和交换范畴
        - 非交换有分区和分页
            - 分区
                - 每个分区保存一个程序，CPU在各个程序之间交替服务
                - 占用连续地址
                - 问题
                    - 分区大小取决于内存管理器预先决定，分区大了会出现空闲区
            - 分页
                - 内存被分为大小相等的若干部分，称为帧
                - 程序被分成若干大小相等的部分，称为页
                - 页和帧的大小相等，页被载入帧
        - 交换有请求分页和请求分段
            - 请求分页
            - 请求分段
                - 程序被分为主程序和子程序
    - 虚拟内存
- 进程管理器
    - 程序、作业和进程
        - 程序: 由程序员编写的一组稳定的指令
        - 作业: 程序从选中执行道运行结束的过程
        - 进程: 一个运行中的程序，驻留在内存中的作业
    - 进程同步
        - 两个问题
            - 死锁
                - 必要条件
                    - 互斥
                    - 资源抢占
                    - 抢先
                    - 循环等待
            - 饥饿
- 设备管理器
- 文件管理器
    - 文件的访问、创建、删除、修改
    - 命名、存储、归档、备份