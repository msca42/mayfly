# 数据存储

## 数据类型

- 五种数据类型: 数字、文本、音频、图像、视频
- 计算机内部使用统一的数据表示，使用 0 和 1 的二进制，称为位模式
  - 多个位模式组成的序列称为位流
  - 8 个位模式称为 1 字节

## 存储数字

- 存在两个问题
  - 如何存储数字的符号
  - 如何显示十进制小数点
    - 定点: 把数字作为整数存储，没有小数部分
    - 浮点：把数字作为实数存储，带有小数部分
- 整数使用定点表示法
  - 定点表示法是将小数点假定为固定在最右，且并不存储
- 无符号表示法
  - 无符号整数包含零和整数，在计算机中通常表示为 0~2<sup>n</sup> - 1,n 表示为用于表示无符号整数的二进制位数
  - 如何存储
    - 将整数转化为二进制整数
    - 如果不足 n 位，左边补 0，如果超过 n 位，溢出
  - 应用
    - 计数、寻址、存储其他数据类型
- 符号加绝对值表示法
  - 如何存储
    - 使用符号位加数值的表示，首位为符号位，其他位为数值位，0 表示正数，1 表示负数
  - 缺点：
    - 两个 0，一个正 0，一个负 0
    - 两个溢出范围，正溢出和负溢出
  - 应用
    - 存储部分实数、用于采样模拟信号
- 二进制补码表示法
  - 如何存储
    - 最左位表示符号位，0 表示正、1 表示负数，符号位也是数值位
    - 正整数的原码、反码和补码在计算机中存储形式一致
    - 负整数在计算机中以补码形式存储
  - 反码
    - 将整数二进制的 0 和 1 取反
  - 补码
    - 运算方式 1：
      - 先取整数二进制的反码
      - 在反码的基础上加上 1
    - 运算方式 2：
      - 从右边复制位开始，直到有 1 被复制
      - 接着，反转其余位
  - 应用
    - 存储位于 n 位存储单元的有符号整数
- 实数
  - 带有整数部分和小数部分的数字，也称为浮点数
  - 使用浮点数表示法，分为三部分: 符号、位移量、定点数
    - 符号: 表示数字的正负
    - 位移量: 显示小数点应该左右移动的位移量
    - 定点数: 小数点位置固定的定点表示法
  - 规范化
    - 科学计数法(十进制)和浮点表示法(二进制)都在小数点左边使用唯一的非零数码
    - 科学计数法小数点左边唯一数码范围 1~9
    - 浮点数计数法小数点左边唯一数码为 1
  - 表示实数的三部分信息
    - 在数字规范化之后需要存储的信息
    - 符号 S:用一个二进制位存储，0 表示正数，1 表示负数
    - 指数 E:定义为小数点移动的位数，为有符号数，通常使用余码表示法表示指数的方法
    - 尾数 M:定义为小数点右边的二进制数，表示精度，通常使用无符号整数存储，将符号和尾数合并，使用符号加绝对值表示法存储
  - 余码表示法
    - 通过在原本范围(有符号整数)之上加上偏移量的方法来表示指数，从而使所有数都是非负数
    - 偏移量的值为 2<sup>(m-1)</sup> - 1，m 是内存单元存储指数的大小
  - IEEE 标准
    - 单精度
      - 符号位 1 位
      - 指数位 8 位
      - 尾数位 23 位
    - 双精度
      - 符号位 1 位
      - 指数位 11 位
      - 尾数位 52 位
  - 将实数转化为 IEEE 表示步骤
    - 确定 S 符号位
    - 将数字转化为二进制
    - 规范化
    - 找到 E 和 M 的值
      - E = 真实指数 + 偏移量
        - 十进制的 E 需要转换为二进制的 E 进行存储
      - M 扩展为符合当前精度的二进制序列
    - 连接 S、E 和 M
  - 上溢和下溢
    - 下溢指的是最小值之间存在无法表示的值
    - 上溢指的是最大值两边存在无法表示的值
  - 存储零
    - 符号、指数、尾数都设为零
  - 截断错误
    - 当数字的精确度超过可以存储的区间，末尾的数字会被截断
    - 截断之后保存的数字和原先的数字之间的差异称为截断错误

## 存储文本

- 文本是用来表示语言中特定意思的符号，可以用位模式表示任意符号
- 一个符号需要多少位模式取决于该符号所属语言集
  - 位模式的长度和符号的数量呈对数关系，N 位的位模式可以表示 2<sup>N</sup>个符号
- 代码
  - 不同的位模式集合被设计用于表示文本符号
  - 每个集合称为代码，表示符号的过程称为编码
  - 常见代码
    - ASCII
      - 使用 7 位表示每个符号，可以定义 128 种符号
    - Unicode
      - 使用 32 位表示每个符号，可以定义 2<sup>32</sup> 个符号

## 存储音频

- 音频是模拟数据，表示在某个时刻声音的密度
- 通过以下步骤获取
  - 采样
    - 在模拟信号上选择数量有限的点来度量值
    - 采样率表示每秒收集的样本数，通常每秒 40000 个样本即可
    - 变化程度不同，需要的样本数也不同
  - 量化
    - 将样本值截取为最接近的整数值一种过程
  - 编码
    - 将量化的样本值编码成位模式
    - 每样本位: 每个样本分配的位数，有 8，16，24，32，也称为位深度
    - 位率: 每秒的样本数量和每样本位的乘积
- 声音编码标准
  - MP3: 每秒 44100 个样本以及每样本 16 位

## 存储图像

- 两种技术: 光栅图、矢量图
- 光栅图
  - 模拟数据，数据密度随空间变化
  - 采样称为扫描，样本称为像素，整个图片被分成小的像素，每个像素假定有单独的密度值
  - 解析度
    - 每英寸方块或线条记录象素数，称为扫描率，也称为解析度
  - 色彩深度
    - 用于表现像素的位的数量
    - 真彩色
      - 使用 24 位编码一个像素，三原色都是 8 位
    - 索引色
      - 截取 256 中颜色作为索引
      - 使用 8 位编码存储一个像素
  - 编码标准
    - JPEG 真彩色
    - GIF 索引色
  - 缺点
    - 文件体积大
    - 调整图像大小有麻烦
- 矢量图
  - 使用几何图形组合成图片

## 存储视频

- 视频是图像(帧)在时间上的表示
- 将每一幅图像或帧转化称一系列位模式并存储
