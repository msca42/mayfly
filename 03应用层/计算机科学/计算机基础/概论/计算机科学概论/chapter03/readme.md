# 操作系统

- 操作系统是控制计算机整体运行的软件

## 操作系统的历史

- 作业：每个程序的执行过程
  - 作为一个独立的活动存在
  - 程序准备，执行程序
- 操作系统
  - 简化程序准备过程，提交作业之间切换的效率
- 批处理
  - 操作员把程序把资料输入存储器，等待操作系统一次一个读入并执行
  - 把若干要执行的作业收集到一个批次中，在不需要用户进一步交互的情况下执行
  - 在存储器中的作业在队列中等待执行，遵循先进先出的原则
  - 指令
    - 作业伴随的，用于说明准备所需步骤
    - 使用 JCL 作业控制语言的系统进行编码
  - 通常作业被提交给队列之后，无法交互，为了适应交互需求，在新的操作系统中扩展了远程终端
- 分时
  - 多用户环境下，满足实时服务的特性
  - 实现方式：多道程序设计
    - 时间被分成时间片，每个作业被限制每次仅一个时间片，从而达到在各个作业之间进行切换的错觉
    - 用于单用户称为多任务处理

## 操作系统的体系结构

- 软件可以分为应用软件和系统软件
  - 应用软件：一些完成机器特定任务的程序组成，常见有电子表格、数据库、记账系统、开发软件以及游戏等
  - 系统软件可以分为操作系统和被称为实用软件的软件单元
- 组件
  - 用户界面：负责与用户通信的部分，可以分为 shell 和 GUI
  - 内核
    - 文件管理程序：维护在海量存储器上所有文件的记录，访问文件需要权限
    - 设备驱动程序: 负责与控制器通信
    - 内存管理程序：协调机器使用内存
    - 调度程序
    - 分派程序
- 系统启动
  - 通过引导过程实现，引导装入程序被永久存储在 ROM 中

## 协调机器的活动

- 进程：在操作系统控制下执行某个程序的活动
  - 进程状态：活动的当前状态
- 进程管理
  - 与协调进程的执行有关的任务由调度程序和分派程序处理
  - 调度程序：维护一个有关计算机系统中现存进程的记录(进程池)
    - 进程表: 内存中调度程序维护的信息块
      - 当程序请求执行时，新建一个表项，包含分配该进程的存储区域，进程优先级，以及进程状态
      - 进程状态可以分为就绪状态和等待状态
  - 分派程序：监督被调度的程序实际执行
    - 在分时/多任务处理系统中，该任务由多道程序设计完成
    - 将时间划分成片，允许每个进程执行一个时间片，然后切换
      - 一个进程变换到另一个进程的过程称为进程切换或上下文切换
      - 每次分派时间片时，都会初始化一个计时器，通过产生一个中断信号表示上一个时间片的结束
      - CPU 接收到中断信号，完成当前机器周期，保存它在进程中的位置，开始执行中断处理程序
    - 中断程序的作用：抢占当前进程，将控制权传回分派程序
    - 分配程序从进程表的就绪进程中选择优先级最高的进程，重启计时器，开始时间片

## 处理进程间的竞争

- 操作系统的一个重要任务就是将机器的各种资源分配给系统中的各个进程
- 信号量
  - 一个标志位，封装了计数器、等待队列和原子操作原语的强大同步机制
  - 一个指令序列一次只能由一个进程执行。这个指令序列称为临界区，一次只允许一个进程执行一个临界区的要求称为互斥
  - 简单来说就是一个进程使用一个外部设备之后，另一个进程无法使用该设备，使用一个称为信号量的标志位
- 死锁
  - 两个或多个进程被阻塞，它们中的每一个都在等待已分配给另一个的资源
  - 前置条件
    - 存在对不可共享的资源的竞争
    - 这些资源是在不完整的基础上请求的
    - 资源一旦分配，无法强行收回

## 安全性

- 内部攻击
- 外部攻击
