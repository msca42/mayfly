# 数据存储

- 讨论不同的数据类型以及它们是如何存储在计算机中的

## 数据类型

- 数据的形式可以分为:数字、文本、音频、图像、视频
- 计算机内部的数据统一采用位模式，位是存储在计算机中最小的单位，包含 0 和 1，位代表设备处于某一状态，0 表示断开状态，1 表示闭合状态
- 位模式是一个序列，通常长度为八的位模式被称为一字节，有时用字指代更长的位模式

## 存储数字

- 在存储到计算机内存中，数字转化为二进制系统，这里讨论如何显示十进制的小数点
- 两种方式显示定点和浮点，定点把数字作为整数存储，浮点把数字作为实数存储
- 整数可以看作小数点位置固定的数字，小数点固定在最右边，在这种表示法中，小数点是假定的，并不存储
- 无符号整数
  - 只包含零和正数的非负整数，由于计算机不可能表示所有整数，所以定义了一个常量，称为最大无符号数，值为 2^n -1,n 是用于分配表示无符号整数的二进制位数
  - 存储步骤: 将整数转为二进制数，位数不足 n,左边补 0，位数大于 n,溢出
  - 应用: 计数、寻址、存储其他数据类型
- 符号加绝对值表示法
  - 将无符号整数有效范围划分为两个子范围，包含正整数和负整数，存在正 0 和负 0
  - 最左位用于定义整数的符号，0 表示正整数，1 表示负整数
  - 应用: 存储部分实数
- 二进制补码表示法
  - 所有计算机都是用二进制补码存储有符号整数
  - 无符号整数的有效范围划分为两个子范围，非负整数和负整数
  - 最左位用于定义整数的符号，0 表示正整数，1 表示负整数
  - 不同于符号加绝对值表示法，二进制补码表示法只有一个 0
  - 应用: 存储整数
- 反码运算:反转所有位
- 补码运算:
  - 方式一:从右边复制位，直到有 1 倍复制，接着反转其余的位
  - 方式二: 先反转所有位，得到的结果加 1

---

- 实数
  - 存储需要使用浮点数表示法
  - 浮点数表示法
    - 一个数由三部分组成，符号位、位移量和定点数
  - 规范化表示
    - 科学计数法和浮点表示法斗在小数点左边使用唯一的非零数码，十进制数码可能是 1 ～ 9，二进制数码是 1
    - 二进制数规范化之后，存储一个数包含了存储这个数的三部分，符号、指数和尾数
    - 符号: 一个数的符号可以用一个二进制位来存储
    - 指数: 2 的幂，定义为小数点移动的位数，幂可以是正数可以是负数，使用余码表示法存储指数位
    - 尾数: 小数点右边的二进制数，定义了精度，作为无符号整数存储
  - 余码系统
    - 指数是有符号的数使用余码表示法表示
    - 正负整数都可以作为无符号数存储，通过添加一个正整数的偏移量,这个偏移量的值是 2^(m-1) -1,m 时内存单元存储指数的大小
  - IEEE 标准
    - 单精度
      - 余 127 码，符号位 1，指数位 8，尾数位 23
    - 双精度
      - 余 1023 码，符号位 1，指数位 11，尾数位 52
  - IEEE 标准浮点数存储步骤
    - 确定符号位 S
    - 将数字转换为二进制
    - 规范化
    - 找到指数 E 和尾数 M
    - 连接 S、E 和 M
  - IEEE 标准浮点数还原步骤
    - 找到 S、E 和 M 的值
    - 根据 S 确定符号
    - 找到位移量(E-偏移量)
    - 对尾数去规范化
    - 将去规范化的数字变为二进制求出绝对值
    - 加上符号
  - 截断错误
    - 尾数位实际的数字数量比 IEEE 规范的数量要多，截取的时候，忽略掉了，这种原始数字和还原数字的差异称为截断错误

## 存储文本

- 任何符号都可以使用位模式表示，所以关注点是需要多少位的位模式可以表示一个符号
- 位模式的长度取决于要表示的符号的数量，关系是对数的。
- 不同的位模式集合被设计用于表示文本符号，每个集合称为代码，表示符号的过程称为编码
- 常见代码
  - ASCII
    - 使用 7 位表示每个符号，即定义 128 中不同的符号
  - Unicode
    - 使用 32 位表示 2^32 个符号

## 存储音频

- 音频是随时间变化的实体，计算机内存存储声音本质是存储一个音频信号的密度
- 音频是模拟数据
- 采样
  - 在模拟信号上选择数量有限的点来度量它们的值并记录
  - 通过采样率这个指标衡量
- 量化
  - 将样本的值截取为最接近的整数值的一个过程
- 编码
  - 量化的样本值需要被编码成位模式
  - 每样本位表示系统决定分配的位数，也称为位深度
  - 当位深度为 B，每秒样本数为 S，每秒的音频存储 SB 位，这个乘积称位率 R
- 声音编码标准
  - 主流标准 MP3
  - 采用 44100 个样本以及每样本 16 位，位率是 705600b/s

## 存储图像

- 光栅图
  - 模拟数据组成的图像，具体体现在数据密度(色彩)因空间变化
  - 采样模拟数据也称为扫描，样本称为像素
  - 图像中扫描率称为解析度
  - 色彩深度用于表现像素的位的数量
  - 像素编码技术
    - 真彩色，使用 24 位编码一个像素，每个三原色表示位 8 位
    - 索引色，每个应用程序从色彩集中选择 256 种颜色建立索引，使用 8 位存储像素
  - 图像编码标准
    - JPEG 使用真彩色模式
    - GIF 使用索引色模式
- 矢量图
  - 将图像分解为几何图形的组合，使用数学公式表达

## 存储视频
- 视频是图像(帧)在时间上的表示
