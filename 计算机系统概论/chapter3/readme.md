# 数字逻辑

- 本章主要介绍逻辑单元的基本要素- MOS 晶体管的工作原理，以及如何基于 MOS 晶体管实现逻辑门，然后如何通过逻辑门互连构建计算机的组成单元

## MOS 晶体管

- MOS 代表金属氧化物半导体，可以分为 P 型和 N 型两类 MOS 晶体管
- n 型 MOS 管
  - 结构
    - 上侧是漏极 D
    - 中间是栅极 G
    - 下面是源极 S
  - 特性
    - 对于 n-MOS 晶体管，如果在栅极接入 2.9V 电压，则在源极和漏极之间就会产生通路，如果栅极电压是 0V,源极和漏极之间断开
- p 型 MOS 管
  - 结构
    - 上侧是源极 S
    - 中间是栅极 G
    - 下面是漏极 D
  - 特性
    - 对于 p-MOS 晶体管，如果栅极电压为 0V，则在源极和漏极之间就会产生通路，如果栅极电压是 2.9V,源极和漏极之间断开
- CMOS 电路(互不金属氧化物半导体): 电路同时包含 p-MOS 和 n-MOS

## 逻辑门

- 本节介绍如何使用 CMOS 电路实现与或非逻辑函数
- 在电子工程中，将实现逻辑函数的 CMOS 电路称为逻辑门电路，具体称为与门、或门和非门

- 非门
  - 结构
    - 两个晶体管，一个 p-MOS 管，一个 n-MOS 管，p-MOS 在上方，n-MOS 在下方
  - 这个电路是 NOT 逻辑的具体实现，称为非门或反相器
- 或非门
  - 结构
    - 两个 p-MOS 管和两个 n-MOS 管组成，两个 p-MOS 在上方垂直，两个 n-MOS 在下方并排
  - 这个电路是 NOR 逻辑的具体实现，称为或非门
- 或门
  - 将或非门和非门结合在一起就是或门
- 与非门
  - 结构
    - 两个 p-MOS 管和两个 n-MOS 管组成，两个 p-MOS 在上方并排，两个 n-MOS 在下方垂直
  - 这个电路是 NOT-AND 逻辑的具体实现，称为与非门
- 与门

  - 将与非门和非门结合在一起就是与门

- 摩根定律
  - 不存在 A 和 B 都为假的情况，等价于，A 和 B 之中至少有一个为真

## 组合逻辑

- 使用基本逻辑门电路构建逻辑结构，就是构建计算机微结构所需使用的结构单元
- 逻辑结构分为两类，可以存储信息的，不能存储信息的(决策单元、组合逻辑结构)
- 组合逻辑结构包含译码器、多路复用器和全加器
- 译码器

  - 2 输入的逻辑门结构
  - 特点: 在所有输出中有且仅有一个为 1，其余皆为 0
  - 每个输出端口对应一个输入模式，因为可以用于检测、匹配不同的输入模式
  - 输入 00，输出 1000
  - 输入 01，输出 0100
  - 输入 10，输出 0010
  - 输入 11，输出 0001
  - 若译码器有 n 个输入，则有 2^n 个输出

- 多路复用器 MUX

  - 功能: 从多个输入中选择一个，并将其与输出相连
  - 结构原理
    - 两个输入 A 和 B，一个决定信号 S，S 和输入通过与门连接，两个与门输出通过或门连接，输出为 C
    - 当 S=0 时，C 与 A 一致，当 S=1 时，C 与 B 一致

- 全加器

  - 输入为两个二进制数位 a,b 和一个来自前一列的进位 c1，输出为当前求和为 S 和传递至下一列运算的进位 C2

- 可编程逻辑阵列 PLA

  - 包含一组与门以及一组或门，与门的数目对应真值表输入组合数目，如果输入数目是 n,PLA 需要 2^n 个与门
  - PLA 可以实现任何逻辑函数的课构建模块

- 逻辑完备性
  - PLA 只包含 OR、AND 和 NOT 三种逻辑门，换句话说只要有足够的 AND、OR 和 NOT 门，就可以实现任何逻辑函数

## 存储单元

- R-S 锁存器

  - 能够存储一个位的信息，置 0 或置 1
  - 实现方式
    - 由两个 NAND 门互联，一个 NAND 的输出是另一个的输入，其他两个输入为 R 和 S
  - 工作机制
    - 只要保持 R 和 S 同时为 1，逻辑电路的状态就不会改变，这种特性称为具有记忆或存储能力

- 门控 D 锁存器

  - 由 R-S 锁存器和控制电路两部分组成

- 寄存器
  - 将多个 bit 组合成一个独立单元，寄存器的 bit 宽度可大可小

## 内存的概念

- 内存是由一定数目的位置组成，每个位置可以单独识别并独立存放一个数据，
- 我们称位置识别符为地址，存储在各个位置中的 bit 数目为寻址能力

- 寻址空间

  - 内存中可独立识别的位置总数
  - 表示地址的 bit 数是 n,可以识别 2^n 个存储位置

- 寻址能力
  - 每个内存位置中包含的 bit 数目
  - 大多数内存都是字节寻址，每个位置存储 1 个字节信息

## 时序电路

- 组合逻辑电路

  - 特点: 不关心电路以前的状态，电路当前的输出完全取决于电路当前的输入
  - 包含多路开关、译码器和全加器

- 时序逻辑电路

  - 特点: 具有存储单元，可以跟踪电路以前的状态
  - 构成: 组合逻辑电路 + 存储单元
  - 作用: 实现有限状态机

- 状态的概念

  - 系统的状态，可以理解为系统中艾特定时刻和特定条件下的快照

- 有限状态机
  - 由五个组成部分: 状态、外部输入、对外输出、任意状态间迁移、对外输出操作
  - 状态转移的触发机制
    - 通常状态转移通过时钟电路触发
    - 时钟是一个信号，低电平和高电平交替变换，即 0 和 1 交替变换的信号
    - 时钟周期是指时钟信号不断变换的间隔时间
    - 在电路实现中，有限状态机的状态转移发生在每个时钟周期的起始时刻

## LC-3 计算机的数据通路
